# æ— é™æ¨¡å¼æ’è¡Œæ¦œæ•°æ®åº“é…ç½®

## ğŸ“‹ æ¦‚è¿°

æ— é™æ¨¡å¼æ’è¡Œæ¦œä½¿ç”¨ Supabase è¿œç«¯æ•°æ®åº“å­˜å‚¨ï¼Œå®ç°çœŸæ­£çš„å…¨çƒæ’è¡Œæ¦œåŠŸèƒ½ã€‚

## ğŸ—„ï¸ æ•°æ®åº“è¡¨ç»“æ„

éœ€è¦åœ¨ Supabase ä¸­åˆ›å»º `infinite_mode_leaderboard` è¡¨ã€‚

### SQL åˆ›å»ºè¯­å¥

åœ¨ Supabase Dashboard çš„ SQL Editor ä¸­æ‰§è¡Œï¼š

```sql
-- åˆ›å»ºæ— é™æ¨¡å¼æ’è¡Œæ¦œè¡¨
CREATE TABLE infinite_mode_leaderboard (
  id BIGSERIAL PRIMARY KEY,
  world INTEGER NOT NULL,
  level INTEGER NOT NULL,
  player_name TEXT NOT NULL,
  kill_count INTEGER NOT NULL DEFAULT 0,
  survival_time INTEGER NOT NULL DEFAULT 0,  -- å­˜æ´»æ—¶é—´ï¼ˆç§’ï¼‰
  created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

-- åˆ›å»ºç´¢å¼•ï¼ˆæé«˜æŸ¥è¯¢æ€§èƒ½ï¼‰
CREATE INDEX idx_infinite_mode_world_level ON infinite_mode_leaderboard(world, level);
CREATE INDEX idx_infinite_mode_kill_count ON infinite_mode_leaderboard(kill_count DESC);
CREATE INDEX idx_infinite_mode_survival_time ON infinite_mode_leaderboard(survival_time DESC);

-- å¯ç”¨è¡Œçº§å®‰å…¨
ALTER TABLE infinite_mode_leaderboard ENABLE ROW LEVEL SECURITY;

-- å…è®¸å…¬å¼€è®¿é—®ï¼ˆè¯»å–å’Œæ’å…¥ï¼‰
CREATE POLICY "Allow public read" ON infinite_mode_leaderboard 
  FOR SELECT USING (true);

CREATE POLICY "Allow public insert" ON infinite_mode_leaderboard 
  FOR INSERT WITH CHECK (true);
```

## ğŸ”§ é…ç½®è¯´æ˜

### 1. è¡¨å­—æ®µè¯´æ˜

- `id`: ä¸»é”®ï¼Œè‡ªå¢
- `world`: ä¸–ç•Œç¼–å·ï¼ˆ1-3ï¼‰
- `level`: å…³å¡ç¼–å·ï¼ˆ1-5ï¼‰
- `player_name`: ç©å®¶åç§°
- `kill_count`: å‡»æ€æ€ªç‰©æ•°
- `survival_time`: å­˜æ´»æ—¶é—´ï¼ˆç§’ï¼‰
- `created_at`: è®°å½•åˆ›å»ºæ—¶é—´

### 2. ç´¢å¼•è¯´æ˜

- `idx_infinite_mode_world_level`: ç”¨äºæŒ‰å…³å¡æŸ¥è¯¢
- `idx_infinite_mode_kill_count`: ç”¨äºæŒ‰å‡»æ€æ•°æ’åº
- `idx_infinite_mode_survival_time`: ç”¨äºæŒ‰å­˜æ´»æ—¶é—´æ’åº

### 3. å®‰å…¨ç­–ç•¥

- å…è®¸æ‰€æœ‰äººè¯»å–ï¼ˆæŸ¥çœ‹æ’è¡Œæ¦œï¼‰
- å…è®¸æ‰€æœ‰äººæ’å…¥ï¼ˆæäº¤è®°å½•ï¼‰
- ä¸å…è®¸æ›´æ–°å’Œåˆ é™¤ï¼ˆé˜²æ­¢ä½œå¼Šï¼‰

## ğŸ“Š æŸ¥è¯¢ç¤ºä¾‹

### è·å–æŒ‡å®šå…³å¡çš„æ’è¡Œæ¦œï¼ˆå‰50åï¼‰

```sql
SELECT * FROM infinite_mode_leaderboard
WHERE world = 1 AND level = 1
ORDER BY kill_count DESC, survival_time DESC
LIMIT 50;
```

## âœ… éªŒè¯é…ç½®

1. åœ¨ Supabase Dashboard çš„ Table Editor ä¸­æŸ¥çœ‹ `infinite_mode_leaderboard` è¡¨
2. è¿è¡Œæ¸¸æˆï¼Œå®Œæˆä¸€æ¬¡æ— é™æ¨¡å¼æŒ‘æˆ˜
3. æ£€æŸ¥è¡¨ä¸­æ˜¯å¦æœ‰æ–°è®°å½•
4. æŸ¥çœ‹æ’è¡Œæ¦œç•Œé¢æ˜¯å¦æ­£å¸¸æ˜¾ç¤ºæ•°æ®

## ğŸ”„ é™çº§æ–¹æ¡ˆ

å¦‚æœ Supabase æœªé…ç½®ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é™çº§åˆ°æœ¬åœ°å­˜å‚¨ï¼ˆlocalStorageï¼‰ï¼Œä½†æ•°æ®ä»…ä¿å­˜åœ¨æœ¬åœ°ï¼Œæ— æ³•å®ç°å…¨çƒæ’è¡Œæ¦œã€‚

